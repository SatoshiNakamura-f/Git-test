name: Require closing keyword
on:
  pull_request_target:
    types: [opened, edited, synchronize, ready_for_review]
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.pull_request.body || "";
            const ok = /(close|closes|closed|fix|fixes|fixed|resolve|resolves|resolved)\s+([A-Za-z0-9_.-]+\/[A-Za-z0-9_.-]+)?#\d+/i.test(body);
            if (!ok) core.setFailed("PR本文に Closes #123 等が必要です。");
